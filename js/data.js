// Vocabulary data
const vocabularyData = {
    units: [
        {
            id: 1,
            title: "èª²æœ¬ Unit 3",
            default: false,
            words: [
                { english: "reality", chinese: "n.[U][C]ç¾å¯¦", example: "" },
                { english: "add", chinese: "vt.åŠ ", example: "" },
                { english: "effect", chinese: "n.[C] ç‰¹æ•ˆ; æ•ˆæžœ, n[C][U] å½±éŸ¿", example: "" },
                { english: "effective", chinese: "adj. æœ‰æ•ˆçš„", example: "" },
                { english: "appearance", chinese: "å¤–è¡¨", example: "" },
                { english: "involved", chinese: "åƒèˆ‡çš„; æœ‰é—œçš„", example: "" },
                { english: "involve", chinese: "åŒ…å«; èˆ‡...æœ‰é—œ", example: "" },
                { english: "scary", chinese: "å¯æ€•çš„", example: "" },
                { english: "wild", chinese: "è’é‡Žçš„; é‡Žç”Ÿç’°å¢ƒ; é‡Žç”Ÿçš„", example: "" },
                { english: "information", chinese: "è³‡è¨Š; æ¶ˆæ¯", example: "" },
                { english: "inform", chinese: "å‘ŠçŸ¥", example: "" },
                { english: "scene", chinese: "å ´æ™¯", example: "" },
                { english: "image", chinese: "å½±åƒ; åœ–åƒ", example: "" },
                { english: "extra", chinese: "é¡å¤–çš„; å¦å¤–çš„", example: "" },
                { english: "curious", chinese: "å¥½å¥‡çš„", example: "" },
                { english: "curiosity", chinese: "å¥½å¥‡å¿ƒ", example: "" },
                { english: "explore", chinese: "æŽ¢ç´¢", example: "" },
                { english: "develop", chinese: "vi vt ç™¼å±•; æˆé•·", example: "" },
                { english: "development", chinese: "n [U] ç™¼å±•; æˆé•·", example: "" },
                { english: "augmented", chinese: "adj. æ“´å¢žçš„", example: "" },
                { english: "virtual", chinese: "adj. è™›æ“¬çš„", example: "" },
                { english: "digital", chinese: "adj. æ•¸ä½çš„", example: "" },
                { english: "mirror", chinese: "n.[C] é¡å­", example: "" },
                { english: "outer space", chinese: "n.[U] å¤–å¤ªç©º", example: "" },
                { english: "headset", chinese: "n.[C] é ­æˆ´è£ç½®", example: "" }
            ]
        },
        {
            id: 2,
            title: "èª²æœ¬ Unit 4",
            default: false,
            words: [
                { english: "consider", chinese: "vt vi è€ƒæ…®", example: "" },
                { english: "consideration", chinese: "n. [U] è€ƒæ…®", example: "" },
                { english: "situation", chinese: "æƒ…æ³", example: "" },
                { english: "tend", chinese: "å‚¾å‘; å¾€å¾€", example: "" },
                { english: "crowd", chinese: "ç¾¤çœ¾", example: "" },
                { english: "daily", chinese: "æ—¥å¸¸çš„; æ¯å¤©çš„", example: "" },
                { english: "suddenly", chinese: "çªç„¶", example: "" },
                { english: "include", chinese: "vt åŒ…æ‹¬", example: "" },
                { english: "including", chinese: "prep åŒ…å«", example: "" },
                { english: "gesture", chinese: "æ‰‹å‹¢", example: "" },
                { english: "rapidly", chinese: "adv è¿…é€Ÿåœ°", example: "" },
                { english: "rapid", chinese: "adj è¿…é€Ÿçš„", example: "" },
                { english: "besides", chinese: "adv æ­¤å¤–", example: "" },
                { english: "drama", chinese: "æˆ²åŠ‡", example: "" },
                { english: "unfortunately", chinese: "ä¸å¹¸åœ°", example: "" },
                { english: "fortunate", chinese: "adj. å¹¸é‹çš„", example: "" },
                { english: "harmful", chinese: "adj. æœ‰å®³çš„", example: "" },
                { english: "harm", chinese: "n.[U] å‚·å®³", example: "" },
                { english: "pressure", chinese: "n.[U][C] å£“åŠ›", example: "" },
                { english: "isolate", chinese: "vt. å­¤ç«‹", example: "" },
                { english: "cutlet", chinese: "n.[C] è‚‰æŽ’", example: "" },
                { english: "stall", chinese: "n.[C] æ”¤å­; æ”¤ä½", example: "" },
                { english: "vendor", chinese: "n.[C] æ”¤è²©; å°è²©", example: "" },
                { english: "poker face", chinese: "n.[C] æ’²å…‹è‡‰; é¢ç„¡è¡¨æƒ…", example: "" },
                { english: "herd", chinese: "n.[C] ç¾¤çœ¾; ç‰§ç¾¤", example: "" },
                { english: "peer", chinese: "n.[C] åŒå„•; åŒè¼©", example: "" },
                { english: "bully", chinese: "vt. éœ¸å‡Œ", example: "" }
            ]
        },
        {
            id: 3,
            title: "é«˜é » Unit 5",
            default: false,
            words: [
                { english: "add", chinese: "ä½¿å¢žåŠ ; åŠ ç¸½", example: "" },
                { english: "addition", chinese: "å¢žåŠ ç‰©; é™„åŠ ç‰©; å¢žåŠ ; é™„åŠ ; åŠ æ³•", example: "" },
                { english: "anxious", chinese: "ç„¦æ…®çš„; æ€¥åˆ‡çš„", example: "" },
                { english: "balance", chinese: "å¹³è¡¡", example: "" },
                { english: "cheat", chinese: "æ¬ºé¨™; ä½œå¼Š", example: "" },
                { english: "confirm", chinese: "ç¢ºèª; è­‰å¯¦", example: "" },
                { english: "consider", chinese: "è€ƒæ…®;è¦–ç‚º", example: "I will consider your offer carefully." },
                { english: "considerate", chinese: "é«”è²¼çš„", example: "" },
                { english: "court", chinese: "æ³•é™¢ï¼›æ³•åº­ï¼›å®®å»·ï¼›é‹å‹•å ´", example: "" },
                { english: "cunning", chinese: "ç‹¡çŒ¾çš„ï¼Œç‹¡çŒ¾ï¼Œå¥¸å·§", example: "" },
                { english: "dialogue", chinese: "å°è©±ï¼Œå°è©ž", example: "" },
                { english: "dominate", chinese: "çµ±æ²»ï¼›æ”¯é…ï¼›å å„ªå‹¢", example: "" },
                { english: "dominant", chinese: "é ˜å°Žçš„ï¼›ä½”å„ªå‹¢çš„", example: "" },
                { english: "excellent", chinese: "å„ªç§€çš„", example: "She did an excellent job on the project." },
                { english: "excellence", chinese: "å„ªç§€", example: "" },
                { english: "fairly", chinese: "ç›¸ç•¶åœ°; å…¬æ­£åœ°", example: "" },
                { english: "fair", chinese: "åˆç†çš„; å…¬å¹³çš„", example: "" },
                { english: "frequently", chinese: "æ™‚å¸¸; é »ç¹åœ°; é »ç¹çš„", example: "" },
                { english: "frequent", chinese: "é »ç¹çš„", example: "" },
                { english: "fun", chinese: "æ¨‚è¶£", example: "We had a lot of fun at the party." },
                { english: "funny", chinese: "æœ‰è¶£çš„; å¥½ç¬‘çš„", example: "" },
                { english: "guilty", chinese: "æœ‰ç½ªæƒ¡æ„Ÿçš„; æœ‰ç½ªçš„; ç½ªæƒ¡æ„Ÿ; ç½ªè¡Œ", example: "" },
                { english: "guilt", chinese: "ç½ªæƒ¡æ„Ÿ; ç½ªè¡Œ", example: "" },
                { english: "have/has", chinese: "æ“æœ‰; ä½¿ç”¨; åƒ; å–", example: "" },
                { english: "interest", chinese: "èˆˆè¶£", example: "He has a keen interest in science." },
                { english: "interesting", chinese: "ä»¤äººè¦ºå¾—æœ‰è¶£çš„", example: "" },
                { english: "interested", chinese: "æ„Ÿèˆˆè¶£çš„", example: "" },
                { english: "uninteresting", chinese: "ä»¤äººæ„Ÿåˆ°ç„¡è¶£çš„", example: "" },
                { english: "loneliness", chinese: "å­¤å–®", example: "" },
                { english: "lonely", chinese: "å­¤å–®çš„", example: "" },
                { english: "mail", chinese: "ä¿¡ä»¶ï¼Œéƒµä»¶; å¯„å‡º", example: "" },
                { english: "minor", chinese: "æ¬¡è¦çš„; å¼±å‹¢; å°‘æ•¸æ—ç¾¤; è¼”ä¿®ç§‘ç›®; æœªæˆå¹´äºº; è¼”ä¿®", example: "" },
                { english: "minority", chinese: "å¼±å‹¢; å°‘æ•¸æ—ç¾¤", example: "" },
                { english: "mask", chinese: "é¢å…·ï¼›å£ç½©; æŽ©é£¾", example: "" },
                { english: "nationality", chinese: "åœ‹ç±", example: "" },
                { english: "nation", chinese: "åœ‹å®¶", example: "" },
                { english: "national", chinese: "adj åœ‹å®¶çš„; å…¨åœ‹çš„; NC åœ‹æ°‘", example: "" },
                { english: "neglect", chinese: "vt å¿½è¦–; ç–å¿½", example: "" },
                { english: "numerous", chinese: "è¨±å¤šçš„", example: "" },
                { english: "origin", chinese: "èµ·æº; å‡ºç”Ÿ", example: "" },
                { english: "original", chinese: "èµ·æºçš„; åŽŸæœ¬çš„; æœ‰åŽŸå‰µæ€§çš„; åŽŸç‰ˆ; åŽŸç¨¿; åŽŸä½œ", example: "" },
                { english: "point", chinese: "é»ž; çœ‹æ³•; åœ°é»ž; æ™‚é–“é»ž; å°–ç«¯; é‡é»ž; åŽŸå› ; ç›®çš„; æŒ‡", example: "" },
                { english: "relate", chinese: "ä½¿ç”¨é—œè¯; æœ‰é—œè¯", example: "" },
                { english: "related", chinese: "ç›¸é—œçš„", example: "" },
                { english: "relation", chinese: "(äººéš›)é—œä¿‚; è¦ªå±¬; é—œè¯", example: "" },
                { english: "relationship", chinese: "é—œä¿‚", example: "" },
                { english: "relative", chinese: "ç›¸å°çš„; è¦ªæˆš", example: "Success is relative to one's goals." },
                { english: "relatively", chinese: "ç›¸å°åœ°", example: "" },
                { english: "religion", chinese: "å®—æ•™; ä¿¡ä»°", example: "" },
                { english: "religious", chinese: "å®—æ•™çš„; æœ‰ä¿¡ä»°çš„; è™”èª çš„", example: "" },
                { english: "responsible", chinese: "è² è²¬çš„", example: "He is responsible for the project." },
                { english: "responsibility", chinese: "è²¬ä»»; è·è²¬", example: "It is my responsibility to ensure safety." },
                { english: "silent", chinese: "æ²‰é»˜çš„", example: "Please remain silent during the test." },
                { english: "silence", chinese: "å¯‚éœ; æ²‰é»˜; ä½¿å®‰éœ", example: "The silence in the library was deafening." },
                { english: "suffer", chinese: "å—...ä¹‹è‹¦; æ‰¿å—; å—è‹¦", example: "He suffered from a severe headache." },
                { english: "underground", chinese: "åœ°ä¸‹çš„; ç§˜å¯†çš„; éžæ³•çš„; åœ¨åœ°åº•ä¸‹; è¢å¯†åœ°", example: "The underground train system is efficient." },
                { english: "understandable", chinese: "èƒ½ç†è§£çš„", example: "It's understandable to feel nervous before a test." },
                { english: "understand", chinese: "ç†è§£", example: "I understand the lesson." },
                { english: "misunderstand", chinese: "èª¤è§£; èª¤æœƒ", example: "I misunderstood the instructions." },
                { english: "misunderstanding", chinese: "èª¤æœƒ", example: "I had a misunderstanding with my friend." },
                { english: "virus", chinese: "ç—…æ¯’", example: "" },
                { english: "lonely", chinese: "å¯‚å¯žçš„", example: "I feel lonely when everyone is gone." },
                { english: "minor", chinese: "æ¬¡è¦çš„", example: "It's only a minor issue." },
                { english: "national", chinese: "åœ‹å®¶çš„", example: "It's a matter of national importance." }
            ]
        },
        {
            id: 4,
            title: "ðŸ“š èª²æœ¬ Unit 5",
            default: true,
            words: [
                { english: "costume", chinese: "n. [C][U] (ç‰¹æ®Šå ´åˆçš„) æœè£", example: "" },
                { english: "ability", chinese: "n. [C][U] æ‰èƒ½", example: "" },
                { english: "weakness", chinese: "n. [C] ç¼ºé»žï¼Œå¼±é»ž", example: "" },
                { english: "personal", chinese: "adj. å€‹äººçš„ï¼Œç§äººçš„", example: "" },
                { english: "normal", chinese: "adj. ä¸€èˆ¬çš„ï¼Œæ­£å¸¸çš„", example: "" },
                { english: "murder", chinese: "vt. è¬€æ®º", example: "" },
                { english: "depressed", chinese: "adj. æ²®å–ªçš„ï¼Œæ†‚é¬±çš„", example: "" },
                { english: "depress", chinese: "vt. ä½¿æ²®å–ª", example: "" },
                { english: "crime", chinese: "n. [U][C] çŠ¯ç½ªï¼Œç½ªè¡Œ", example: "" },
                { english: "anger", chinese: "n. [U] æ†¤æ€’ï¼Œç”Ÿæ°£", example: "" },
                { english: "protect", chinese: "vt.; vi. ä¿è­·", example: "" },
                { english: "protection", chinese: "n. [U] ä¿è­·åŠ›", example: "" },
                { english: "childhood", chinese: "n. [C][U] ç«¥å¹´ï¼Œå­©ç«¥æ™‚æœŸ", example: "" },
                { english: "female", chinese: "adj.å¥³æ€§çš„è€… / n. [C] å¥³æ€§ï¼Œå¥³å­", example: "" },
                { english: "respect", chinese: "vt. å°Šæ•¬ / n. [U] å°Šæ•¬", example: "" },
                { english: "emotion", chinese: "n. [C][U] æƒ…ç·’ï¼Œæƒ…æ„Ÿ", example: "" },
                { english: "emotional", chinese: "adj. æƒ…ç·’çš„ï¼Œæƒ…æ„Ÿçš„", example: "" },
                { english: "negative", chinese: "adj. ä¸å¥½çš„ï¼Œè² é¢çš„", example: "" },
                { english: "superhero", chinese: "n. [C] è¶…ç´šè‹±é›„", example: "" },
                { english: "hero", chinese: "n. [C] è‹±é›„", example: "" },
                { english: "heroine", chinese: "n. [C] å¥³è‹±é›„", example: "" },
                { english: "high-tech", chinese: "adj. é«˜ç§‘æŠ€çš„", example: "" },
                { english: "weapon", chinese: "n. [C] æ­¦å™¨", example: "" },
                { english: "pilot", chinese: "n. [C] é£›è¡Œå“¡", example: "" },
                { english: "extraordinary", chinese: "adj. éžå‡¡çš„", example: "" },
                { english: "believe it or not", chinese: "ä¿¡ä¸ä¿¡ç”±ä½ ", example: "" },
                { english: "get over", chinese: "å¾ž......æ¢å¾©", example: "" },
                { english: "make A into B", chinese: "æŠŠAè®ŠæˆB", example: "" },
                { english: "deal with", chinese: "è™•ç†ï¼Œæ‡‰ä»˜", example: "" }
            ]
        },
        {
            id: 5,
            title: "ðŸ“š èª²æœ¬ Unit 6",
            default: true,
            words: [
                { english: "bargain", chinese: "n. [C] ç‰¹åƒ¹å•†å“ / vi è¨Žåƒ¹é‚„åƒ¹", example: "" },
                { english: "quality", chinese: "n. [U][C] å“è³ª", example: "" },
                { english: "company", chinese: "n. [C] å…¬å¸", example: "" },
                { english: "career", chinese: "n. [C] è·æ¥­(ç”Ÿæ¶¯), äº‹æ¥­", example: "" },
                { english: "explosion", chinese: "n. [U][C] çˆ†ç‚¸", example: "" },
                { english: "explode", chinese: "vi. vt. çˆ†ç‚¸", example: "" },
                { english: "injure", chinese: "vt. ä½¿å—å‚·, å‚·å®³", example: "" },
                { english: "injury", chinese: "n. [U][C] å‚·å®³, æå®³", example: "" },
                { english: "instead", chinese: "adv. ç›¸ååœ°, å»", example: "" },
                { english: "improve", chinese: "vt. vi. æ”¹é€², æ”¹å–„", example: "" },
                { english: "improvement", chinese: "n. [U][C] æ”¹é€², æ”¹å–„", example: "" },
                { english: "skill", chinese: "n. [U][C] æŠ€å·§, æŠ€èƒ½", example: "" },
                { english: "demand", chinese: "vt. è¦æ±‚, è«‹æ±‚ / n. [U][C] è¦æ±‚, éœ€æ±‚", example: "" },
                { english: "product", chinese: "n. [U][C] ç”¢å“", example: "" },
                { english: "productive", chinese: "adj. å¤šç”¢çš„", example: "" },
                { english: "supply", chinese: "vt. æä¾›, ä¾›æ‡‰ / n. [C] ä¾›æ‡‰é‡", example: "" },
                { english: "succeed", chinese: "vt. æˆåŠŸ(åš...)", example: "" },
                { english: "gentle", chinese: "adj. æº«æŸ”", example: "" },
                { english: "scare...away", chinese: "æŠŠ...åš‡è·‘", example: "" },
                { english: "figure out", chinese: "æ˜Žç™½, ç†è§£", example: "" },
                { english: "take...seriously", chinese: "èªçœŸçœ‹å¾…", example: "" },
                { english: "rain or shine", chinese: "ç„¡è«–å¦‚ä½•, é¢¨é›¨ç„¡é˜»", example: "" },
                { english: "pass by", chinese: "ç¶“éŽ", example: "" },
            ]
        },
        {
            id: 6,
            title: "ðŸ“š é«˜é » Unit 6",
            default: true,
            words: [
                { english: "abbreviate", chinese: "vt. ç¸®å¯«, ä½¿è®ŠçŸ­", example: "" },
                { english: "abbreviation", chinese: "n. [C] ç¸®å¯«", example: "" },
                { english: "afford", chinese: "vt. è² æ“”å¾—èµ·, æ‰¿æ“”å¾—èµ·", example: "" },
                { english: "affordable", chinese: "adj. è² æ“”å¾—èµ·çš„", example: "" },
                { english: "cancellation", chinese: "n. [C] [U] å–æ¶ˆ", example: "" },
                { english: "cancel", chinese: "vt. vi. å–æ¶ˆ", example: "" },
                { english: "clap", chinese: "vt. vi. æ‹(æ‰‹); é¼“(æŽŒ) / n. [C] å·¨éŸ¿; æ‹æ‰‹", example: "" },
                { english: "complain", chinese: "vt. vi. æŠ±æ€¨; ç”³è¨´", example: "" },
                { english: "complaint", chinese: "n. [U] [C] æŠ±æ€¨;ç”³è¨´", example: "" },
                { english: "completely", chinese: "adv. å®Œå…¨, çµ•å°", example: "" },
                { english: "incomplete", chinese: "adj. ä¸å®Œæ•´çš„; æœªå®Œæˆçš„", example: "" },
                { english: "complete", chinese: "adj. å®Œå…¨çš„; å®Œæ•´çš„, vt. å®Œæˆ; ä½¿å®Œæ•´", example: "" },
                { english: "conversation", chinese: "n. [C] [U] å°è©±, è«‡è©±", example: "" },
                { english: "converse", chinese: "v. adj. vi. äº¤è«‡, adj ç›¸åçš„", example: "" },
                { english: "dedication", chinese: "n. [U] [C] å¥‰ç», è‡´åŠ›", example: "" },
                { english: "dedicate", chinese: "vt. ä½¿å¥‰ç», ä½¿è‡´åŠ›æ–¼", example: "" },
                { english: "defender", chinese: "n. [C] å®ˆè¡›è€…; æ“è­·è€…; è¾¯è­·è€…", example: "" },
                { english: "defend", chinese: "vt. æŠµç¦¦;é˜²å®ˆ;ç‚º..è¾¯è­·", example: "" },
                { english: "defense", chinese: "n. [U] æŠµç¦¦;é˜²å®ˆ;è¾¯è­·", example: "" },
                { english: "dirt", chinese: "n [U] æ³¥æ¿˜; ç°å¡µ", example: "" },
                { english: "dirty", chinese: "adj. é«’çš„", example: "" },
                { english: "disappear", chinese: "vt. æ¶ˆå¤±", example: "" },
                { english: "appear", chinese: "vt. å‡ºç¾;ä¼¼ä¹Ž", example: "" },
                { english: "float", chinese: "vt. ä½¿æ¼‚æµ® vi. æ¼‚æµ®; é£„æµ®", example: "" },
                { english: "geographical", chinese: "adj. åœ°ç†çš„", example: "" },
                { english: "geography", chinese: "n. [U] åœ°ç†(å­¸)", example: "" },
                { english: "hike", chinese: "n. [C] å¥è¡Œ vt. vi. å¥è¡Œ(æ–¼)", example: "" },
                { english: "hiking", chinese: "n. [U] å¥è¡Œ", example: "" },
                { english: "impact", chinese: "n [C] å½±éŸ¿, è¡æ“Š vt. vi. å½±éŸ¿", example: "" },
                { english: "intend", chinese: "vt. æ„åœ–", example: "" },
                { english: "intention", chinese: "n. [C] [U] æ„åœ–", example: "" },
                { english: "leak", chinese: "vt. vi. æ¼, æ»²; æ´©æ¼ n. [C] æ¼å‡º(ç‰©);æ¼æ´ž", example: "" },
                { english: "long", chinese: "adj. é•·çš„; ä¹…çš„ adv. ä¹…ä¹…åœ°", example: "" },
                { english: "motto", chinese: "n. [C] åº§å³éŠ˜; æ ¼", example: "" },
                { english: "promote", chinese: "vt. æå€¡; å®£å‚³; ä½¿å‡é·", example: "" },
                { english: "promotion", chinese: "n. [C] [U] å®£å‚³; å‡é·", example: "" },
                { english: "put", chinese: "vt. æ”¾ç½®; ä½¿è™•æ–¼(...çš„ç‹€æ…‹)", example: "" },
                { english: "robot", chinese: "n. [C] æ©Ÿå™¨äºº", example: "" },
                { english: "rude", chinese: "adj. ç„¡ç¦®çš„", example: "" },
                { english: "safety", chinese: "n. [U] å®‰å…¨", example: "" },
                { english: "safe", chinese: "adj. å®‰å…¨", example: "" },
                { english: "skill", chinese: "n. [C] [U] æŠ€èƒ½ (=ability)", example: "" },
                { english: "skillfully", chinese: "adv. å·§å¦™åœ°, æœ‰æŠ€å·§åœ°", example: "" },
                { english: "skillful", chinese: "adj. ç†Ÿç·´çš„", example: "" },
                { english: "strange", chinese: "adj. å¥‡æ€ªçš„", example: "" },
                { english: "stranger", chinese: "n. [C] é™Œç”Ÿäºº", example: "" },
                { english: "sweeten", chinese: "vt. ä½¿è®Šç”œ", example: "" },
                { english: "sweet", chinese: "adj. ç”œçš„; è¨Žäººå–œæ­¡çš„", example: "" },
                { english: "transfer", chinese: "vt. ä½¿è½‰ç§»; ä½¿èª¿å‹•;ä½¿è½‰ä¹˜ n. [C] [U] è½‰ç§»; èª¿å‹•", example: "" },
                { english: "useful", chinese: "adj. æœ‰ç”¨çš„; æœ‰ç›Šçš„", example: "" },
                { english: "use", chinese: "v. n. vt. ä½¿ç”¨ n.[S] [U] ä½¿ç”¨ [C] [U] ç”¨æ³•", example: "" },
                { english: "useless", chinese: "adj. ç„¡ç”¨çš„", example: "" },
                { english: "misuse", chinese: "n. [C] [U] èª¤ç”¨; æ¿«ç”¨ vt. èª¤ç”¨; æ¿«ç”¨", example: "" },
                { english: "vacation", chinese: "n. [C] [U] åº¦å‡; ä¼‘å‡", example: "" },
                { english: "visit", chinese: "vt. vi æ‹œè¨ª; é€ è¨ª; åƒè§€ n. [C] æ‹œè¨ª; é€ è¨ª; åƒè§€", example: "" },
                { english: "visitor", chinese: "n [C] è¨ªå®¢; åƒè§€è€…", example: "" },
                { english: "wake", chinese: "vt vi (ä½¿)é†’ä¾†", example: "" },
                { english: "weak", chinese: "adj. å¼±çš„; è™›å¼±çš„", example: "" },
                { english: "weaken", chinese: "vt. vi. (ä½¿) è®Šå¼±", example: "" },
            ]
        }
    ]
};

// Function to get all units
function getAllUnits() {
    return vocabularyData.units;
}

// Function to get a specific unit by ID
function getUnitById(unitId) {
    return vocabularyData.units.find(unit => unit.id === parseInt(unitId));
}

// Function to get words from a specific unit
function getWordsFromUnit(unitId) {
    const unit = getUnitById(unitId);
    return unit ? unit.words : [];
}

// Function to get words from multiple units
function getWordsFromUnits(unitIds) {
    let words = [];
    unitIds.forEach(unitId => {
        words = words.concat(getWordsFromUnit(unitId));
    });
    return words;
}

// Function to get all words from all units
function getAllWords() {
    return vocabularyData.units.reduce((allWords, unit) => {
        return allWords.concat(unit.words);
    }, []);
}

// Function to search for words
function searchWords(query) {
    query = query.toLowerCase();
    const allWords = getAllWords();
    return allWords.filter(word => 
        word.english.toLowerCase().includes(query) || 
        word.chinese.includes(query)
    );
}

// Function to get a random set of words
function getRandomWords(count, excludeWords = []) {
    const allWords = getAllWords().filter(word => !excludeWords.includes(word));
    const shuffled = [...allWords].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, count);
}

/**
 * Cloud audio service integration
 * Provides TTS (text-to-speech) functionality for vocabulary words
 */
const cloudAudioService = {
    // Supported cloud providers
    providers: {
        FREEDIC: 'FreeDictionaryAPI',
        GOOGLE_TTS: 'GoogleTTS',
    },
    
    // Current provider - can be changed in settings
    currentProvider: 'FreeDictionaryAPI',
    
    // Cache for audio URLs to prevent redundant API calls
    cache: {},

    /**
     * Get audio for a word from the cloud service
     * @param {string} word - The English word to get audio for
     * @returns {Promise<string>} - Promise resolving to audio URL
     */
    getWordAudio(word) {
        // Check cache first
        if (this.cache[word]) {
            console.log('Using cached audio URL for:', word);
            return Promise.resolve(this.cache[word]);
        }

        // Use provider-specific implementation
        switch(this.currentProvider) {
            case this.providers.FREEDIC:
                //console.log('Fetching audio from FreeDictionaryAPI for:', word);
                return this.getFreeDictionaryAPI(word);
            case this.providers.GOOGLE_TTS:
                //console.log('Fetching audio from Google TTS for:', word);
                return this.getGoogleTTS(word);
            default:
                console.error(`Provider ${this.currentProvider} not supported. Falling back to default.`);
                return this.getFallbackAudio(word);
        }
    },
      /**
     * Get audio from Google TTS (Text-to-Speech)
     * @param {string} word - The word to get audio for
     * @returns {Promise<string>} - Audio URL
     */
    getGoogleTTS(word) {
        // Due to CORS restrictions with Google TTS, we use a more reliable approach
        // Option 1: Using a data URI with a base64 encoded MP3 would be ideal but requires server-side help
        // Option 2: Using a CORS proxy (this is a temporary solution for demonstration)
        const encodedWord = encodeURIComponent(word.toLowerCase());
        
        // Using a free CORS proxy to bypass the restrictions
        // NOTE: In a production environment, you should set up your own proxy server
        const proxyUrl = `https://cors-anywhere.herokuapp.com/`;
        const googleTTSUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodedWord}&tl=en&client=tw-ob`;
        
        // Return a promise that resolves with the audio blob URL
        return new Promise((resolve, reject) => {
            // In a real application, we would fetch through the proxy and convert to blob URL
            // For simplicity and to make it work immediately, we'll use ResponsiveVoice as a fallback
            // This is a client-side TTS alternative that doesn't have CORS issues
            console.log('Using ResponsiveVoice as Google TTS alternative for:', word);
            
            // For safety, still return the Google URL and let the playAudioFromUrl handle errors
            resolve(googleTTSUrl);
        });
    },
    /**
     * Get audio from FreeDictionaryAPI
     * @param {string} word - The word to get audio for
     * @returns {Promise<string>} - Audio URL
     */    
    getFreeDictionaryAPI(word) {
        // For direct browser use, it's better to use a more reliable source
        // FreeDictionaryAPI provides pronunciation URLs
        const dictionaryUrl = `https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(word)}`;

        return fetch(dictionaryUrl)
            .then(response => response.json())
            .then(data => {
                if (data && data[0] && data[0].phonetics && data[0].phonetics.length > 0) {
                    // Find the first phonetic with audio
                    const phoneticWithAudio = data[0].phonetics.find(p => p.audio);
                    if (phoneticWithAudio && phoneticWithAudio.audio) {
                        const audioUrl = phoneticWithAudio.audio;
                        this.cache[word] = audioUrl;
                        return audioUrl;
                    }
                }
                // If no audio found in dictionary, return a special marker for speech synthesis
                console.log('No pronunciation audio found in FreeDictionaryAPI. Will use speech synthesis for:', word);
                return Promise.reject('NO_AUDIO_USE_SPEECH_SYNTHESIS');
            })
            .catch((error) => {
                console.log('FreeDictionaryAPI fetch error:', word, error);
                // Return a specific marker to indicate speech synthesis should be used
                return Promise.reject('NO_AUDIO_USE_SPEECH_SYNTHESIS');
            });
    },
    
    /**
     * Fallback to a default audio source if cloud services are unavailable
     * @param {string} word - The word to get audio for
     * @returns {Promise<string>} - Audio URL
     */
    getFallbackAudio(word) {
        console.log('Falling back to default audio source for:', word);
        // Try various dictionary sources for the audio
        const sources = [
            `https://translate.google.com/translate_tts?ie=UTF-8&q=${word.toLowerCase()}&tl=en&client=tw-ob`,
//          `https://ssl.gstatic.com/dictionary/static/pronunciation/2022-03-02/audio/${word.charAt(0).toLowerCase()}/${word.toLowerCase()}_en_us_1.mp3`,
//          `https://media.merriam-webster.com/audio/prons/en/us/mp3/${word.charAt(0).toLowerCase()}/${word.toLowerCase()}.mp3`,
//          `https://audio.oxforddictionaries.com/en/mp3/${word.toLowerCase()}_us_1.mp3`
        ];
        
        // Try each source in sequence
        const trySource = (index) => {
            if (index >= sources.length) {
                // All sources failed, resolve with the first one anyway
                this.cache[word] = sources[0];
                return Promise.resolve(sources[0]);
            }
            
            return fetch(sources[index], { method: 'HEAD', mode: 'no-cors' })
                .then(response => {
                    if (response.ok) {
                        this.cache[word] = sources[index];
                        return sources[index];
                    }
                    // Try next source
                    return trySource(index + 1);
                })
                .catch(() => {
                    // Try next source
                    return trySource(index + 1);
                });
        };
        
        return trySource(0);
    },
    
    /**
     * Set the current TTS provider
     * @param {string} provider - Provider name from this.providers
     */
    setProvider(provider) {
        if (Object.values(this.providers).includes(provider)) {
            this.currentProvider = provider;
            // Clear cache when changing providers to ensure fresh URLs
            this.cache = {};
        } else {
            console.error(`Invalid provider: ${provider}. Using default.`);
            this.currentProvider = this.providers.FreeDictionaryAPI;
        }
    },
    
    /**
     * Get available providers
     * @returns {Array<string>} - List of provider names
     */    getAvailableProviders() {
        // Return only FreeDictionaryAPI as the available provider
        return [this.providers.FREEDIC];
    }
};

// Enhanced function to play audio with fallback to cloud services
function playAudio(audioUrl, word) {
    // Show debug information
    console.log('Playing audio for:', word || 'unknown word', 'URL:', audioUrl);
    
    // If we don't have an audioUrl but we have a word, go directly to cloud service
    if ((!audioUrl || audioUrl === "") && word) {
        console.log('No audio URL provided, using cloud service directly for:', word);
        
        cloudAudioService.getWordAudio(word)
            .then(cloudUrl => {
                console.log('Retrieved cloud audio URL:', cloudUrl);
                playAudioFromUrl(cloudUrl);
            })
            .catch(err => {
                console.error('Failed to get cloud audio:', err);
            });
        return;
    }
    
    // Try to play the provided URL
    playAudioFromUrl(audioUrl, word);
}

/**
 * Play audio from a URL with error handling
 * @param {string} url - The audio URL to play
 * @param {string} [word] - Optional word for cloud fallback
 */
function playAudioFromUrl(url, word) {
    console.log('playAudioFromUrl:', url, 'for word:', word);
    
    // Check for special marker or invalid URL
    if (!url || url === '' || url === 'NO_AUDIO_USE_SPEECH_SYNTHESIS') {
        console.log('No valid audio URL - using speech synthesis for:', word);
        
        // Use speech synthesis as fallback
        if (word && 'speechSynthesis' in window) {
            try {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.9; // Slightly slower for better clarity
                window.speechSynthesis.speak(utterance);
            } catch (err) {
                console.error('Speech synthesis failed:', err);
            }
        } else {
            console.error('Cannot play audio: No URL and no word provided or speech synthesis not available');
        }
        return;
    }
    
    // Create audio element
    const audio = new Audio();
    audio.crossOrigin = "anonymous"; // Enable CORS handling
    audio.src = url;
    
    // Handle errors
    audio.addEventListener('error', (e) => {
        console.log('Audio error:', e);
        console.log('Audio file not found or error playing:', url);
        
        // Use speech synthesis as fallback
        if (word && 'speechSynthesis' in window) {
            try {
                console.log('Using speech synthesis fallback for:', word);
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            } catch (err) {
                console.error('Speech synthesis fallback failed:', err);
            }
        } else {
            console.error('Audio fallback not available');
        }
    });
      // Try to play the audio
    audio.play().catch(err => {
        console.error('Audio playback error:', err);
        
        // Use speech synthesis as fallback
        if (word && 'speechSynthesis' in window) {
            try {
                console.log('Using speech synthesis after playback failure for:', word);
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            } catch (err) {
                console.error('Speech synthesis fallback failed:', err);
            }
        } else {
            console.error('Audio playback failed and fallback not available');
        }
    });
}

// Function to track user progress (using localStorage)
const userProgress = {
    // Get the user's progress for a specific word
    getWordProgress(wordId) {
        const progress = JSON.parse(localStorage.getItem('vocabProgress')) || {};
        return progress[wordId] || { correct: 0, incorrect: 0, mastered: false };
    },
    
    // Update the user's progress for a word
    updateWordProgress(wordId, isCorrect) {
        const progress = JSON.parse(localStorage.getItem('vocabProgress')) || {};
        if (!progress[wordId]) {
            progress[wordId] = { correct: 0, incorrect: 0, mastered: false };
        }
        
        if (isCorrect) {
            progress[wordId].correct += 1;
            // Mark as mastered if correctly answered 5 times
            if (progress[wordId].correct >= 5) {
                progress[wordId].mastered = true;
            }
        } else {
            progress[wordId].incorrect += 1;
            // Reset mastery status if answer is incorrect
            progress[wordId].mastered = false;
        }
        
        localStorage.setItem('vocabProgress', JSON.stringify(progress));
    },
    
    // Get all mastered words
    getMasteredWords() {
        const progress = JSON.parse(localStorage.getItem('vocabProgress')) || {};
        return Object.keys(progress).filter(wordId => progress[wordId].mastered);
    },
    
    // Get progress stats for a unit
    getUnitProgress(unitId) {
        const unit = getUnitById(unitId);
        if (!unit) return { total: 0, mastered: 0, percentage: 0 };
        
        const progress = JSON.parse(localStorage.getItem('vocabProgress')) || {};
        let masteredCount = 0;
        
        unit.words.forEach(word => {
            const wordId = `${unitId}-${word.english}`;
            if (progress[wordId] && progress[wordId].mastered) {
                masteredCount += 1;
            }
        });
        
        return {
            total: unit.words.length,
            mastered: masteredCount,
            percentage: unit.words.length > 0 ? Math.round((masteredCount / unit.words.length) * 100) : 0
        };
    }
};